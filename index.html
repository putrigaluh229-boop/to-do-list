<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catatan Nely</title>

<!-- Font Bubble -->
<link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">

<style>
:root {
  --bg: linear-gradient(135deg,#ffe9f3,#d8f2ff,#f2ffe9,#fff4d9);
  --card: rgba(255,255,255,0.9);
  --accent: #ff8ac7;
  --accent2: #8e7dff;
  --accent3: #5dd39e;
  --text: #523c5c;
}

body.dark{
  --bg: linear-gradient(135deg,#2c2c3a,#3d3d55,#4d4d66);
  --card: rgba(45,45,55,0.9);
  --text: #eee;
  --accent: #ff87c1;
  --accent2: #a68cff;
  --accent3: #74e5b4;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  font-family:'Bubblegum Sans',cursive;
  background:var(--bg);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:30px 10px;
  transition:background 0.4s;
}

.container{
  background:var(--card);
  width:100%;
  max-width:520px;
  padding:25px 30px;
  border-radius:25px;
  box-shadow:0 12px 25px rgba(0,0,0,0.2);
  animation:pop 0.8s ease;
}

@keyframes pop{
  from{transform:scale(0.7);opacity:0;}
  to{transform:scale(1);opacity:1;}
}

h1{
  text-align:center;
  font-size:2.5rem;
  color:var(--accent);
  margin-bottom:15px;
}

.top-bar{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}

.top-bar button{
  font-size:0.9rem;
  padding:5px 12px;
}

.controls{
  display:flex;
  gap:10px;
  margin-bottom:15px;
}

.controls input[type="text"],.controls input[type="date"]{
  flex:1;
  padding:8px 12px;
  font-size:1rem;
  border:2px solid var(--accent);
  border-radius:18px;
  outline:none;
  font-family:'Bubblegum Sans',cursive;
}

button{
  padding:8px 15px;
  border:none;
  border-radius:18px;
  background:var(--accent);
  color:white;
  font-size:1rem;
  cursor:pointer;
  font-family:'Bubblegum Sans',cursive;
  transition:0.3s;
}

button:hover{
  background:#ff9ed0;
  transform:scale(1.05);
}

.filter-bar, .search-box{
  margin-bottom:10px;
}

.filter-bar select, .search-box input{
  width:100%;
  padding:7px 10px;
  font-size:1rem;
  border:2px solid var(--accent2);
  border-radius:18px;
  outline:none;
  font-family:'Bubblegum Sans',cursive;
}

.progress-container{
  margin-bottom:15px;
}
.progress-container progress{
  width:100%;
  height:18px;
  border-radius:10px;
  overflow:hidden;
}
.progress-container span{
  display:block;
  text-align:right;
  font-size:0.9rem;
  margin-top:3px;
  color:var(--text);
}

ul{list-style:none;}

.task{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#fffafc;
  padding:10px 12px;
  margin-bottom:10px;
  border-radius:15px;
  box-shadow:0 2px 5px rgba(0,0,0,0.1);
  transition:all 0.3s ease;
  animation:fadeIn 0.4s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(-5px);}
  to{opacity:1;transform:translateY(0);}
}

.task.done{
  text-decoration:line-through;
  background:#e6ffe6;
  color:#777;
}

.task.important{
  border-left:6px solid gold;
  background:#fff9e0;
}

.task.overdue{
  border-left:6px solid red;
}

.task span{
  flex:1;
  font-size:1rem;
  cursor:pointer;
}

.task small{
  font-size:0.8rem;
  color:gray;
  margin-right:8px;
}

.task button{
  background:none;
  color:var(--text);
  font-size:1.1rem;
  padding:4px;
  margin-left:4px;
  transition:0.3s;
}

.task button:hover{
  color:var(--accent2);
  transform:scale(1.2);
}

.no-task{
  text-align:center;
  color:#aaa;
  margin-top:20px;
}
</style>
</head>
<body>

<div class="container">
  <h1>üìí Catatan Nely</h1>

  <div class="top-bar">
    <button id="toggleTheme">üåó Mode Gelap</button>
    <button id="clearAll">üóëÔ∏è Hapus Semua</button>
  </div>

  <div class="controls">
    <input type="text" id="taskInput" placeholder="Tulis tugas baru...">
    <input type="date" id="taskDate">
    <button id="addBtn">Tambah</button>
  </div>

  <div class="filter-bar">
    <select id="filterSelect">
      <option value="all">üìã Semua</option>
      <option value="pending">üî• Belum Selesai</option>
      <option value="done">‚úÖ Selesai</option>
      <option value="important">‚≠ê Penting</option>
    </select>
  </div>

  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Cari tugas... üîé">
  </div>

  <div class="progress-container">
    <progress id="progressBar" value="0" max="100"></progress>
    <span id="progressText">0% selesai</span>
  </div>

  <ul id="taskList"></ul>
  <div class="no-task" id="noTaskMsg">Belum ada catatan</div>
</div>

<script>
const taskInput=document.getElementById('taskInput');
const taskDate=document.getElementById('taskDate');
const addBtn=document.getElementById('addBtn');
const taskList=document.getElementById('taskList');
const noTaskMsg=document.getElementById('noTaskMsg');
const searchInput=document.getElementById('searchInput');
const filterSelect=document.getElementById('filterSelect');
const progressBar=document.getElementById('progressBar');
const progressText=document.getElementById('progressText');
const clearAll=document.getElementById('clearAll');
const toggleTheme=document.getElementById('toggleTheme');

let tasks=JSON.parse(localStorage.getItem('nelyTasksV2'))||[];
let darkMode=false;

function saveTasks(){
  localStorage.setItem('nelyTasksV2',JSON.stringify(tasks));
}

function renderTasks(){
  const filter=filterSelect.value;
  const search=searchInput.value.toLowerCase();
  taskList.innerHTML='';
  const filtered=tasks.filter(t=>{
    if(filter==='done'&&!t.done) return false;
    if(filter==='pending'&&t.done) return false;
    if(filter==='important'&&!t.important) return false;
    if(!t.text.toLowerCase().includes(search)) return false;
    return true;
  });

  if(filtered.length===0){
    noTaskMsg.style.display='block';
  }else{
    noTaskMsg.style.display='none';
    filtered.forEach((task,idx)=>{
      const li=document.createElement('li');
      li.className='task'+(task.done?' done':'')+(task.important?' important':'')+(task.deadline && !task.done && new Date(task.deadline)<new Date()?' overdue':'');
      
      const span=document.createElement('span');
      span.textContent=task.text;
      span.title='Klik untuk centang';
      span.addEventListener('click',()=>{
        task.done=!task.done;
        saveTasks();
        renderTasks();
      });

      const dateInfo=document.createElement('small');
      if(task.deadline) dateInfo.textContent='‚è≥ '+task.deadline;

      const impBtn=document.createElement('button');
      impBtn.innerHTML=task.important?'‚≠ê':'‚òÜ';
      impBtn.title='Tandai Penting';
      impBtn.addEventListener('click',()=>{
        task.important=!task.important;
        saveTasks();
        renderTasks();
      });

      const editBtn=document.createElement('button');
      editBtn.textContent='‚úèÔ∏è';
      editBtn.title='Edit';
      editBtn.addEventListener('click',()=>{
        const newText=prompt('Edit catatan:',task.text);
        if(newText){
          task.text=newText;
          saveTasks();
          renderTasks();
        }
      });

      const delBtn=document.createElement('button');
      delBtn.textContent='üóëÔ∏è';
      delBtn.title='Hapus';
      delBtn.addEventListener('click',()=>{
        tasks.splice(tasks.indexOf(task),1);
        saveTasks();
        renderTasks();
      });

      li.appendChild(span);
      if(task.deadline) li.appendChild(dateInfo);
      li.appendChild(impBtn);
      li.appendChild(editBtn);
      li.appendChild(delBtn);
      taskList.appendChild(li);
    });
  }
  updateProgress();
}

function updateProgress(){
  const total=tasks.length;
  const done=tasks.filter(t=>t.done).length;
  const percent=total===0?0:Math.round((done/total)*100);
  progressBar.value=percent;
  progressText.textContent=`${percent}% selesai`;
}

addBtn.addEventListener('click',()=>{
  const text=taskInput.value.trim();
  const deadline=taskDate.value;
  if(text!==''){
    tasks.push({text,done:false,important:false,deadline});
    saveTasks();
    taskInput.value='';
    taskDate.value='';
    renderTasks();
  }
});

taskInput.addEventListener('keyup',e=>{if(e.key==='Enter')addBtn.click();});
searchInput.addEventListener('input',renderTasks);
filterSelect.addEventListener('change',renderTasks);

clearAll.addEventListener('click',()=>{
  if(confirm('Yakin ingin menghapus semua catatan?')){
    tasks=[];
    saveTasks();
    renderTasks();
  }
});

toggleTheme.addEventListener('click',()=>{
  darkMode=!darkMode;
  if(darkMode){
    document.body.classList.add('dark');
    toggleTheme.textContent='üåû Mode Terang';
  }else{
    document.body.classList.remove('dark');
    toggleTheme.textContent='üåó Mode Gelap';
  }
});

renderTasks();
</script>

</body>
</html>
